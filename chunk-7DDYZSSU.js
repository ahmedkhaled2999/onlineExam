import{c as P,j as d,s as E}from"./chunk-Y3TGKFW7.js";import{$b as F,B as p,Cb as k,Ga as f,Gb as R,Ha as b,Qa as h,U as i,Wa as I,Ya as y,Z as o,_ as g,_b as m,ab as _,ba as v,eb as A,fb as C,gb as S,mb as x,o as c,r as a,ub as w,wb as j}from"./chunk-X6Q2UVPN.js";var n=(()=>{class e{static{this.LOGIN="https://exam.elevateegy.com/api/v1/auth/signin"}static{this.signup="https://exam.elevateegy.com/api/v1/auth/signup"}static{this.changepassword="https://exam.elevateegy.com/api/v1/auth/changePassword"}static{this.logout="https://exam.elevateegy.com/api/v1/auth/logout"}static{this.forgotpassword="https://exam.elevateegy.com/api/v1/auth/forgotPassword"}static{this.VerifyResetCode="https://exam.elevateegy.com/api/v1/auth/verifyResetCode"}static{this.ResetPassword="https://exam.elevateegy.com/api/v1/auth/resetPassword"}static{this.useriFno="https://exam.elevateegy.com/api/v1/auth/profileData"}}return e})();var N=(()=>{class e{constructor(){}adaptForget(t){return{message:t.message}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=i({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var O=(()=>{class e{constructor(){}adapt(t){return{message:t.message,token:t.token,user:t.user.username}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=i({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var V=(()=>{class e{constructor(){}Adapterror(t){return{error:t.error.message,message:t.message,status:t.status}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=i({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var M=(()=>{class e{constructor(){}adaptUserInfo(t){return{email:t.user.email,_id:t.user._id,username:t.user.username,firstNam:t.user.firstName,lastName:t.user.lastName}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=i({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var T=(()=>{class e{constructor(t,r,s,G,H){this._httpClient=t,this._adaptForgetService=r,this._adaptSeRVICE=s,this._adapterror=G,this._userInfoService=H}login(t){return this._httpClient.post(n.LOGIN,t).pipe(a(r=>this._adaptSeRVICE.adapt(r)),p(r=>{let s=this._adapterror.Adapterror(r);return c(s)}))}regester(t){return this._httpClient.post(n.signup,t).pipe(a(r=>this._adaptSeRVICE.adapt(r)),p(r=>{let s=this._adapterror.Adapterror(r);return c(s)}))}forgetpass(t){return this._httpClient.post(n.forgotpassword,t).pipe(a(r=>this._adaptForgetService.adaptForget(r)),p(r=>{let s=this._adapterror.Adapterror(r);return c(s)}))}resetCodeapi(t){return this._httpClient.post(n.VerifyResetCode,t).pipe(a(r=>r),p(r=>{let s=this._adapterror.Adapterror(r);return c(s)}))}ResetPassworde(t){return this._httpClient.put(n.ResetPassword,t).pipe(a(r=>r),p(r=>{let s=this._adapterror.Adapterror(r);return c(s)}))}userInfo(){return this._httpClient.get(n.useriFno).pipe(a(t=>this._userInfoService.adaptUserInfo(t)))}static{this.\u0275fac=function(r){return new(r||e)(o(d),o(N),o(O),o(V),o(M))}}static{this.\u0275prov=i({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var B=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=i({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var D=(()=>{class e{constructor(t,r,s){this._mAuthapiService=t,this._jwttokenService=r,this._=s,this.isAuthenticated=h(!1),this.rout=g(E),this.looding=h(!1),this.callapi=h(!1),this.errormassege=h("")}singup(t,r){r.valid?(this.looding.set(!0),this.callapi.set(!0),this._mAuthapiService.regester(t).subscribe({next:s=>{console.log(s),this.errormassege.set(""),this.looding.set(!1),this.callapi.set(!1),this.rout.navigate(["auth/login"])},error:s=>{console.log(s),this.looding.set(!1),this.callapi.set(!1),console.log("AdabtERROR",s),this.errormassege.set(s.error)}})):r.markAllAsTouched()}singin(t,r){r.valid?(this.looding.set(!0),this.callapi.set(!0),this._mAuthapiService.login(t).subscribe({next:s=>{if("token"in s){console.log(s),this.isAuthenticated.set(!0),localStorage.setItem("token",s.token),console.log(s.user),this.errormassege.set(""),this.looding.set(!1),this.callapi.set(!1),this.rout.navigate(["/home"]);return}},error:s=>{this.looding.set(!1),this.callapi.set(!1),console.log("AdabtERROR",s),this.errormassege.set(s.error)}})):r.markAllAsTouched()}forgetpassword(t,r){r.valid?(this.looding.set(!0),this.callapi.set(!0),this._mAuthapiService.forgetpass(t).subscribe({next:s=>{this.errormassege.set(""),this.looding.set(!1),this.callapi.set(!1),this.rout.navigate(["/auth/VerifyResetCode"]),console.log(s)},error:s=>{console.log(s),this.looding.set(!1),this.callapi.set(!1),this.errormassege.set(s.error)}})):console.log("err")}VerifyResetCode(t,r){r.valid?(this.looding.set(!0),this.callapi.set(!0),this._mAuthapiService.resetCodeapi(t).subscribe({next:s=>{console.log(s),this.errormassege.set(""),this.looding.set(!1),this.callapi.set(!1),this.rout.navigate(["/auth/RestPassword"])},error:s=>{console.log(s),this.looding.set(!1),this.callapi.set(!1),this.errormassege.set(s.error)}})):console.log("err")}Restpaswword(t,r){r.valid?(this.looding.set(!0),this.callapi.set(!0),this._mAuthapiService.ResetPassworde(t).subscribe({next:s=>{console.log(s),this.errormassege.set(""),this.looding.set(!1),this.callapi.set(!1),this.rout.navigate(["/auth/login"])},error:s=>{console.log(s),this.looding.set(!1),this.callapi.set(!1),this.errormassege.set(s.error)}})):console.log("err")}logout(){this.isAuthenticated.set(!1),localStorage.removeItem("token"),this.rout.navigate(["/auth/login"])}userInfo(){return this._mAuthapiService.userInfo()}static{this.\u0275fac=function(r){return new(r||e)(o(T),o(B),o(d))}}static{this.\u0275prov=i({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var X=(e,u,t)=>[e,u,t];function Y(e,u){e&1&&S(0,"i",2)}function Z(e,u){if(e&1&&w(0),e&2){let t=x();j(" ",t.text," ")}}var ct=(()=>{class e{constructor(t){this._callAPIService=t,this.looding=()=>!1,this.calapi=()=>!1,this.text="add",this.style="w-full",this.style_button=!0,F(()=>{this.looding=m(()=>this._callAPIService.looding()),this.calapi=m(()=>this._callAPIService.callapi())})}static{this.\u0275fac=function(r){return new(r||e)(b(D))}}static{this.\u0275cmp=v({type:e,selectors:[["app-button"]],inputs:{Adisabled:"Adisabled",text:"text",style:"style",style_button:"style_button"},standalone:!0,features:[k],decls:4,vars:8,consts:[[1,"mt-2"],[3,"disabled","ngClass"],[1,"fa-solid","fa-spinner","fa-spin","bg-black-alpha-10"]],template:function(r,s){r&1&&(A(0,"div",0)(1,"button",1),I(2,Y,1,0,"i",2)(3,Z,1,1),C()()),r&2&&(f(),y("disabled",s.calapi())("disabled",s.Adisabled)("ngClass",R(4,X,s.style,s.Adisabled?" bg-black-alpha-20":"main-bg",s.style_button?"style_button":"style_button-white")),f(),_(2,s.looding()?2:3))},dependencies:[P],styles:[".borer-color[_ngcontent-%COMP%]{border-color:transparent}.colorChange[_ngcontent-%COMP%]{background-color:#fff;border-color:#00000034}.colorChange[_ngcontent-%COMP%]:hover{background-color:var(--main-color);border-color:var(--main-color);color:#fff}"]})}}return e})();export{D as a,ct as b};
